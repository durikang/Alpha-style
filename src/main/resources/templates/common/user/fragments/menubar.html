<!-- menu.html -->
<header class="header" th:fragment="menu">
    <div class="logo">
        <span><a th:href="@{/}"><img th:src="@{/user/img/alpha_Style.png}" alt="logo"></a></span>
    </div>
    <!-- í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ -->
    <div class="nav-toggle" onclick="toggleNav()">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </div>
    <nav class="nav">
        <ul id="navMenu">
            <!-- ì •ì  ë§í¬: ì¸ê¸°ìƒí’ˆ, ì‹ ìƒí’ˆ -->
            <li class="nav-item">
                <a th:href="@{/user/popular-products}" class="nav-link">ì¸ê¸°ìƒí’ˆ</a>
            </li>
            <li class="nav-item">
                <a th:href="@{/user/new-products}" class="nav-link">ì‹ ìƒí’ˆ</a>
            </li>
            <!-- ë™ì  ë©”ì¸ ì¹´í…Œê³ ë¦¬ -->
            <li th:each="mainCategory : ${navMainCategories}" class="nav-item dropdown">
                <a th:href="@{/user/products/main/{id}(id=${mainCategory.id})}" class="nav-link" th:text="${mainCategory.mainCategoryName}">ë©”ì¸ ì¹´í…Œê³ ë¦¬</a>
                <ul class="dropdown-menu">
                    <li th:each="subCategory : ${mainCategory.subCategories}">
                        <a th:href="@{/user/products/sub/{id}(id=${subCategory.id})}" class="dropdown-item" th:text="${subCategory.subCategoryName}">ì„œë¸Œ ì¹´í…Œê³ ë¦¬</a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
    <div class="user-options">
        <!-- ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ ë©”ë‰´ í‘œì‹œ -->
        <div th:if="${session.loginMember == null}">
            <a th:href="@{/signup}" class="user-item">íšŒì›ê°€ì…</a>
            <a th:href="@{/login}" class="user-item">ë¡œê·¸ì¸</a>
        </div>
        <div th:if="${session.loginMember != null}">
            <span th:text="'ì•ˆë…•í•˜ì„¸ìš”, ' + ${session.loginMember.username} + 'ë‹˜!'"></span>
            <a th:href="@{/logout}" class="user-item">ë¡œê·¸ì•„ì›ƒ</a>

            <a th:href="@{/user/order-check/user/{userId}(userId=${session.loginMember.userId})}"
               class="user-item"
               th:if="${session.loginMember != null}">ì£¼ë¬¸ì¡°íšŒ</a>

            <a th:href="@{/user/mypage}" class="user-item">ë§ˆì´í˜ì´ì§€</a>

            <!-- ê´€ë¦¬ì ê¶Œí•œì¼ ê²½ìš° ê´€ë¦¬ì í˜ì´ì§€ ë§í¬ ì¶”ê°€ -->
            <a th:if="${session.loginMember.role == 'admin' or session.loginMember.role == 'ADMIN'}"
               th:href="@{/admin/adminHome}" class="user-item admin-item">
                ê´€ë¦¬ì í˜ì´ì§€
            </a>
        </div>
    </div>
    <div class="search-cart">
        <input type="text" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" class="search-input">
        <a th:href="@{/user/cart}" class="cart" title="ì¥ë°”êµ¬ë‹ˆ">ğŸ›’</a>
        <a th:href="@{/user/profile}" class="user" title="í”„ë¡œí•„">ğŸ‘¤</a>
    </div>
</header>

<!-- ë„¤ë¹„ê²Œì´ì…˜ í† ê¸€ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
    function toggleNav() {
        const navMenu = document.getElementById('navMenu');
        navMenu.classList.toggle('show');
    }
</script>
